<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Afloat Chapter 4: The Erosion | Varun Mangalick</title>
<meta name="keywords" content="">
<meta name="description" content="As he read and wrote endless records of island arrivals and departures, Jun kept track of the patterns he noticed. While islands tended to spend a majority of their time away from the Archipelago, both their visits and the times between tended to increase in duration as the islands grew older. Hundreds of years ago, historians discovered that the oldest islands in the Archipelago showed their age through fogged eyes and brittle shells which flaked off keratin constantly.">
<meta name="author" content="">
<link rel="canonical" href="http://example.org/hobbies/writing/post-4-island-turtles/chapter-4-the-erosion/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.23566690e79e8730be6b6ac943debadfbe93c386871d0b49a96023a6acf6d10c.css" integrity="sha256-I1ZmkOeehzC&#43;a2rJQ966376Tw4aHHQtJqWAjpqz20Qw=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://example.org/favicon.ico">
<link rel="apple-touch-icon" href="http://example.org/apple-touch-icon.png">

<meta name="twitter:title" content="Afloat Chapter 4: The Erosion | Varun Mangalick" />
<meta name="twitter:description" content="As he read and wrote endless records of island arrivals and departures, Jun kept track of the patterns he noticed. While islands tended to spend a majority of their time away from the Archipelago, both their visits and the times between tended to increase in duration as the islands grew older. Hundreds of years ago, historians discovered that the oldest islands in the Archipelago showed their age through fogged eyes and brittle shells which flaked off keratin constantly." />
<meta property="og:title" content="Afloat Chapter 4: The Erosion | Varun Mangalick" />
<meta property="og:description" content="As he read and wrote endless records of island arrivals and departures, Jun kept track of the patterns he noticed. While islands tended to spend a majority of their time away from the Archipelago, both their visits and the times between tended to increase in duration as the islands grew older. Hundreds of years ago, historians discovered that the oldest islands in the Archipelago showed their age through fogged eyes and brittle shells which flaked off keratin constantly." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/hobbies/writing/post-4-island-turtles/chapter-4-the-erosion/" />
<meta property="article:section" content="hobbies" />
  <meta property="article:published_time" content="2022-05-05T14:49:54-04:00" />
  <meta property="article:modified_time" content="2022-05-05T14:49:54-04:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Hobbies",
      "item": "http://example.org/hobbies/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Writing",
      "item": "http://example.org/hobbies/writing/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Writing: Afloat",
      "item": "http://example.org/hobbies/writing/post-4-island-turtles/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Afloat Chapter 4: The Erosion",
      "item": "http://example.org/hobbies/writing/post-4-island-turtles/chapter-4-the-erosion/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Afloat Chapter 4: The Erosion | Varun Mangalick",
  "name": "Afloat Chapter 4: The Erosion",
  "description": "As he read and wrote endless records of island arrivals and departures, Jun kept track of the patterns he noticed. While islands tended to spend a majority of their time away from the Archipelago, both their visits and the times between tended to increase in duration as the islands grew older. Hundreds of years ago, historians discovered that the oldest islands in the Archipelago showed their age through fogged eyes and brittle shells which flaked off keratin constantly.",
  "keywords": [
    
  ],
  "wordCount" : "2307",
  "inLanguage": "en",
  "datePublished": "2022-05-05T14:49:54-04:00",
  "dateModified": "2022-05-05T14:49:54-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://example.org/hobbies/writing/post-4-island-turtles/chapter-4-the-erosion/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Varun Mangalick",
    "logo": {
      "@type": "ImageObject",
      "url": "http://example.org/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-hobbies kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://example.org/" accesskey="h" title="Varun Mangalick (Alt + H)">Varun Mangalick</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://example.org/hobbies/" title="Hobbies" class="active"
                >Hobbies
                </a>
            </li>
            <li>
                <a href="http://example.org/projects/" title="Technical Projects"
                >Technical Projects
                </a>
            </li>
            <li>
                <a href="http://example.org/travel/" title="Travel"
                >Travel
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Afloat Chapter 4: The Erosion</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>May 5, 2022</span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>As he read and wrote endless records of island arrivals and departures, Jun kept track of the patterns he noticed. While islands tended to spend a majority of their time away from the Archipelago, both their visits and the times between tended to increase in duration as the islands grew older. Hundreds of years ago, historians discovered that the oldest islands in the Archipelago showed their age through fogged eyes and brittle shells which flaked off keratin constantly. When these islands left, they did so permanently, likely searching out a place to die in solitude. Despite this knowledge, the inhabitants of the aging island Tulora refused to migrate to a younger island when Tulora was preparing to leave. They departed, never to be seen again.</p>
<p>Jun treasured his conversations with Rusik just as much if not more than before. He spent much of the time discussing his discoveries to see which were unknown, proven wrong, or common knowledge, though none ended up being in the first category.</p>
<p>Some records illustrated how much even his life on Che’el had benefited from the scientific advances of the Archipelago. The tanning of fish leather using black kelp had just been discovered 50 years ago, and the edible and structural plants grown on Che’el were already the result of generations of work spent on selective breeding. Upon hearing of this, Lira grew even more excited about her pursuit of new practical knowledge so she could continue the long tradition of Che’el’s improvement.</p>
<p>In a record from centuries past, Jun read of islands which arrived and departed unsettled by people. New families only moved to the frontier of new land when their original islands grew too crowded, but even then, they often stayed on the Archipelago, hopping islands until they had established a trade well enough to join a newly settled departing island. After reading this, Jun peered out across the hundreds of islands of Koatus in confusion. While exploring, he had seen one or two unsettled islands which seemed small enough for this to be their first visit, though unsettled islands were much more rare a sight than the record would have led him to believe.</p>
<p>With Rusik’s permission, Jun borrowed and scanned through summary records of decades spread across the past millennium. He had a dozen guesses racing through his head, but evidence eliminated them one by one. The islands didn’t seem to be staying for less time or leaving for longer. Islands didn’t seem to be dying at a higher rate. The estimated total number of people did seem to be increasing, but not fast enough to account for the increase in crowding in the Archipelago.</p>
<p>Finally, Jun found a promising thread to pull and possibly unravel this knot. The number of unsettled islands which arrived at the Archipelago seemed to decrease each century. Jun initially attributed this to the fact that some of the arriving islands were repeat arrivals; they weren’t properly named or tracked until they were settled. An increasing population would mean fewer unsettled islands leaving and therefore fewer unsettled islands arriving, but what if there were actually fewer islands being born and arriving for the first time?</p>
<p>While the arriving islands hadn’t been named, thankfully they had been measured, and these measurements had been preserved at least for the last couple of centuries. Jun counted up the number of arriving islands which were small enough to perhaps be first arrivals, and while the trend was slight, it was undeniable: the number of islands being born appeared to be decreasing.</p>
<p>As Jun finished sharing his findings, Lira furrowed her brow, puzzled. “So fewer islands are coming to the Archipelago?” she asked. “Where are they going then?”</p>
<p>“That’s what I’m trying to tell you,” Jun said, “they’re not going anywhere else. There are just fewer islands being born and making it to the Archipelago for the first time.”</p>
<p>Lira remained visibly puzzled. “But if that were the case, wouldn’t we have noticed? How would there still be enough islands for us to live on? For us to have always lived on?”</p>
<p>“I don’t know if it’s always been decreasing or if it started several hundred years ago, but it’s happening so slowly, no one would really be able to tell a difference in a lifetime.”</p>
<p>“So, let’s say the islands end up becoming a little more crowded,” Lira said. “That’s the whole point of everything I’ve been learning! Over time, we learn how to gather, fish, and plant more efficiently than we could before. We’ll keep learning and keep improving.”</p>
<p>“But what if one day, the islands are all gone? What can we learn to make up for that?”</p>
<p>“We’d find a way.”</p>
<p>Frustrated, Jun headed towards Che’el. Lira didn’t understand, but she had always been the type to be too occupied by what she was doing at that moment. Unless he could convince her to apprentice with the historians, she’d obsess over plants and birds until the sun went down. He walked to his family’s shelter to talk to Alcar. Alcar had taught him everything he knew about observation, he would listen.</p>
<p>The conversation started out fairly similar to the one Jun had had with Lira. But as Jun explained his process of deduction again, Alcar started to nod with some understanding if not acceptance. “Clearly you took my advice,” Alcar said. “But are you sure about this? Have you mentioned this to the historians?”</p>
<p>“I want to, but I need to talk to someone first and make sure I’m not crazy.” Jun threw his hands up with frustration. “They haven’t even let me join discussions, and I want to start off by telling them that the world is going to end?”</p>
<p>Alcar stared off into the distance, deep in thought. “I know it seems like a lot, but if you did your due diligence, there’s no reason to feel embarrassed to talk about where your reasoning brought you.”</p>
<p>“And what if I’m wrong?”</p>
<p>Alcar continued, still seeming to have only half a mind focused on his words. “If you’re wrong, I’d be far happier than if you’re right. But if you are right&hellip;” He trailed off, taking a moment to form his words. “Not everyone will want to hear this. We’ve always lived on the islands, and if we couldn’t, I’m not sure what we’d do.”</p>
<hr>
<p>Jun walked with Rusik towards a meeting of the historians. Sometime after his conversation with Alcar, Jun found out from Rusik that he would finally be allowed to join the meetings. As they walked, Jun played out a dozen versions of the words in his head. How was he supposed to bring up his hypothesis? Perhaps it would be easier to broach the topic with just Rusik first.</p>
<p>“Rusik, there’s something I want to discuss at the meeting, but can I run it by you first?” Jun asked.</p>
<p>Rusik smiled at him. “Couple of months ago, you wouldn’t have even asked. Of course, what is it?”</p>
<p>Jun once again walked through his reasoning including all of his enumerated possibilities and how he had eliminated all of them but one. As Rusik listened, his eyes grew grave, more so than Jun had ever seen since meeting him. After Jun finished, Rusik shook his head, as if to dissuade a bothering gnat, and then suddenly his expression lightened back up. “That’s an interesting idea, but ideas of that sort have been disproven dozens of times.”</p>
<p>Expecting to hear a more surprised and disbelieving response, Jun had started to line up further evidence and figures to support his idea, but Rusik’s seemingly offhand dismissal left him taken aback. “Are you sure?” he asked hesitantly. “Can you show me how this is disproven? I can show you more of my work?”</p>
<p>Rusik turned to face the other historians as he and Jun approached the group which had begun to congregate. Rusik seemed to be focused on greeting the other historians, so Jun resolved to continue the discussion after the meeting. The topics discussed were mostly mundane, including detailed recounting of events from some newly arrived islands as well as updates on the movement of populations throughout the Archipelago. Jun found his mind treading the steps of his investigation over and over, trying to figure out what mistake he could have made. But each iteration only seemed to strengthen his conviction in his belief.</p>
<p>After the meeting, Jun tried to talk to Rusik, but the man was swept up in conversations with partners who meandered away surprisingly quickly. Jun needed to talk to someone, and so he worked up the courage to approach Karu. “There’s something I want to ask you about. I was reading the records and came up with a pretty scary theory about the islands, and I just want to talk it through with someone to see if I’m just being silly.”</p>
<p>Karu looked down with annoyance as if to shoo him away, but seeing Jun’s evident agitation, she relaxed her frown. “Tell me quickly, what is it?”</p>
<p>Jun once again talked through his findings, and as he finished, he waited for the inevitable dismissal, likely accompanied by harsher words than Rusik’s. To his surprise, Karu ushered him away from the gathering. “I didn’t expect you to notice, especially so soon.”</p>
<p>Jun was once again taken aback. Karu saw his expression and continued. “We call it the Erosion. Those of us that accept it of course. I don’t know how long ago the first historian noticed it, but for years, those who knew of the Erosion would not speak of it, as if giving it voice would cause it to occur. Eventually, enough historians independently reached the same conclusion, and they discovered each other.</p>
<p>“In secret, they collected evidence, checked each others’ work, and polished their arguments until they shone with inarguable truth. Emboldened by solidarity, they presented their findings to the other historians in gatherings across the Archipelago. Most of the listeners dove into the records to perform their own calculations, but over time, they all split into two groups. Some finally accepted the Erosion, but far, far more denied it.</p>
<p>“The deniers of the Erosion, with their vast majority, conferred and came to a stance: Even if the Erosion is true, if we have no way to address it, then we cannot let it be known. They told us believers that we were forbidden from speaking of this to any who did not already know. They hoped to avoid a panic among the populace, but even among the historians, they wanted to maintain a focus on understanding island biology and how to maximize life upon them.</p>
<p>“I’ll never know how many of the deniers truly did not believe in the Erosion versus how many simply refused to accept what they could not fix. But from then on, our numbers have grown only from historians like you who have discovered the truth and talked to the right person.”</p>
<p>Jun stared at Karu, his brain struggling to process what he was hearing. He was right! “So what does that mean for me? Do I get to join extra secret meetings now?”</p>
<p>Karu sighed. “You’re about 20 years too late. We used to meet more, but we’ve come to the conclusions we will come to, and we’ve mostly given up.”</p>
<p>Jun imagined Karu and the other believers of the Erosion, clearly the most observant of the historians, passionately discussing causes and solutions for the Erosion. But he couldn’t imagine them giving up. “What conclusions did you come to?”</p>
<p>“The Erosion is occurring slowly enough that in conjunction with general scientific advancement on the Archipelago, we should have a hundred years or more before we begin running into issues, but once we reach that point, it would be difficult to find a solution.”</p>
<p>“Why?”</p>
<p>“The more crowded we get, the harder it will be to feed everyone on the resources of the islands and the Archipelago. Without excess food, we shall lose our excess time, and without that, research and our study of history shall grind to a half. The second conclusion was that the seamounts could house small populations to temporarily alleviate-”</p>
<p>“Living on the seamounts?” Jun asked incredulously. “I know the Archipelago has lots of fish, but how would people survive on just plants and fish without gathered meat?”</p>
<p>Karu sniffed with annoyance. “As I was saying, it could temporarily alleviate crowding, but we’re not sure if living on the seamounts would encourage fishing at a level which could drain the populations around the Archipelago. We believe planting may be more viable there due to freshwater streams which seem to originate from higher up on the peak, but we haven’t found a believable excuse to send people to try.”</p>
<p>Jun thought for a moment. “What if you figured out the cause of the Erosion and fixed that?”</p>
<p>“Believe me, we’ve tried,” Karu said. “As far as we can tell, the islands feed at a massive scale on whatever ocean life they encounter. Their waste then fertilizes the growth of life in their wake. As long as there is life, there are islands. But as we’ve examined records of fishing success for islands which have returned to the Archipelago across the last few centuries, we’ve found a slight decline in their catches which parallels the decline in the population of the islands.”</p>
<p>“Decline of fish? You don’t think&hellip;” Jun said, trailing off in thought. “Could it be from us? Are we eating too many of the fish?”</p>
<p>“I doubt it,” Karu replied. “Like the islands, we return our waste to the ocean, and like the islands, we fertilize new life to compensate for what we take. This is different. It is as if God has reached down to reclaim his gift of creation for himself.”</p>
<p><a href="http://example.org/hobbies/writing/post-4-island-turtles/chapter-5-the-dive/">Read Chapter 5</a></p>
<p><a href="http://example.org/hobbies/writing/post-4-island-turtles/">Back to Afloat home</a></p>


  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2023 <a href="http://example.org/">Varun Mangalick</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
