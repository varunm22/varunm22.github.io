<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Afloat Chapter 5: The Dive | Varun Mangalick</title>
<meta name="keywords" content="">
<meta name="description" content="Jun stuffed his things into a knapsack, clothes and food for two full days. Coming back to Che’el, he had hoped to see his family, but he finally came home during a time when they were out. Lira, however, trailed behind him, peppering him with questions. “What’s going on? Where are you headed in such a rush?”
“It’s all real, Lira,” Jun responded. “The Erosion is real, and we have to find a way to stop it!">
<meta name="author" content="">
<link rel="canonical" href="http://example.org/hobbies/writing/post-4-island-turtles/chapter-5-the-dive/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.ab05148e5661148e402b2199b864ab67291a4effb912e994aad0b5c7d7462a5f.css" integrity="sha256-qwUUjlZhFI5AKyGZuGSrZykaTv&#43;5EumUqtC1x9dGKl8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://example.org/favicon.ico">
<link rel="apple-touch-icon" href="http://example.org/apple-touch-icon.png">

<meta name="twitter:title" content="Afloat Chapter 5: The Dive | Varun Mangalick" />
<meta name="twitter:description" content="Jun stuffed his things into a knapsack, clothes and food for two full days. Coming back to Che’el, he had hoped to see his family, but he finally came home during a time when they were out. Lira, however, trailed behind him, peppering him with questions. “What’s going on? Where are you headed in such a rush?”
“It’s all real, Lira,” Jun responded. “The Erosion is real, and we have to find a way to stop it!" />
<meta property="og:title" content="Afloat Chapter 5: The Dive | Varun Mangalick" />
<meta property="og:description" content="Jun stuffed his things into a knapsack, clothes and food for two full days. Coming back to Che’el, he had hoped to see his family, but he finally came home during a time when they were out. Lira, however, trailed behind him, peppering him with questions. “What’s going on? Where are you headed in such a rush?”
“It’s all real, Lira,” Jun responded. “The Erosion is real, and we have to find a way to stop it!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/hobbies/writing/post-4-island-turtles/chapter-5-the-dive/" />
<meta property="article:section" content="hobbies" />
  <meta property="article:published_time" content="2022-05-16T23:27:26-04:00" />
  <meta property="article:modified_time" content="2022-05-16T23:27:26-04:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Hobbies",
      "item": "http://example.org/hobbies/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Writing",
      "item": "http://example.org/hobbies/writing/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Writing: Afloat",
      "item": "http://example.org/hobbies/writing/post-4-island-turtles/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "Afloat Chapter 5: The Dive",
      "item": "http://example.org/hobbies/writing/post-4-island-turtles/chapter-5-the-dive/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Afloat Chapter 5: The Dive | Varun Mangalick",
  "name": "Afloat Chapter 5: The Dive",
  "description": "Jun stuffed his things into a knapsack, clothes and food for two full days. Coming back to Che’el, he had hoped to see his family, but he finally came home during a time when they were out. Lira, however, trailed behind him, peppering him with questions. “What’s going on? Where are you headed in such a rush?”\n“It’s all real, Lira,” Jun responded. “The Erosion is real, and we have to find a way to stop it!",
  "keywords": [
    
  ],
  "wordCount" : "2903",
  "inLanguage": "en",
  "datePublished": "2022-05-16T23:27:26-04:00",
  "dateModified": "2022-05-16T23:27:26-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://example.org/hobbies/writing/post-4-island-turtles/chapter-5-the-dive/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Varun Mangalick",
    "logo": {
      "@type": "ImageObject",
      "url": "http://example.org/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-hobbies kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://example.org/" accesskey="h" title="Varun Mangalick (Alt + H)">Varun Mangalick</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="http://example.org/hobbies/" title="Hobbies" class="active"
                >Hobbies
                </a>
            </li>
            <li>
                <a href="http://example.org/projects/" title="Technical Projects"
                >Technical Projects
                </a>
            </li>
            <li>
                <a href="http://example.org/travel/" title="Travel"
                >Travel
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Afloat Chapter 5: The Dive</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>May 16, 2022</span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>Jun stuffed his things into a knapsack, clothes and food for two full days. Coming back to Che’el, he had hoped to see his family, but he finally came home during a time when they were out. Lira, however, trailed behind him, peppering him with questions. “What’s going on? Where are you headed in such a rush?”</p>
<p>“It’s all real, Lira,” Jun responded. “The Erosion is real, and we have to find a way to stop it!”</p>
<p>“The Erosion? What are you talking about?”</p>
<p>Jun recounted his conversation with Karu, and he watched Lira’s expression sink. As he started stating the conclusions Karu had come to, Lira raised an eyebrow. “So the historians are working on this, and it won’t be a big issue until long after we’re dead,” Lira said, talking over him. “So what are you expecting to do right now?”</p>
<p>“Don’t you understand? Che’el won’t stay here forever, so if we want to do something about this, we have to do it now.”</p>
<p>“I guess,” Lira said hesitantly, “but as I said, what are you expecting to do right now?”</p>
<p>“Every seamount must have historians who are thinking about what caused this or how to fix it, but they’re too afraid to openly discuss it. I’m sure they’ve figured out pieces of this puzzle, and if I can talk to them and figure out what those are, maybe we can put them together to find a solution!”</p>
<p>“But the historians won&rsquo;t accept anyone who talks about it openly,” Lira said. “Jun, don’t you want to be a historian?”</p>
<p>Jun looked out in the distance in the direction of Dalom, then back down to Che’el’s shell beneath his feet. “I never really thought I was going to leave Che’el and stay in the Archipelago. I couldn’t leave everyone behind. And now that I’ve seen how the historians have covered up the Erosion, I’m even less sure I want to join them, even if I want to do what they do.”</p>
<p>Lira nodded subtly in agreement. “When are you planning on leaving for the next seamount?”</p>
<p>“Tomorrow at first light,” Jun said. “We’ll need to go quickly to make it by night, and even so, I’ll sleep tonight on one of the islands on the edge of our cluster.”</p>
<p>“I’ll be ready.”</p>
<hr>
<p>Jun and Lira stood at the front and back of their raft, paddling in sync to propel themselves smoothly forward. In the months they had spent on the Archipelago, they had considerably improved their ability on the raft, given it was the primary form of transport between islands. Even so, journeying to the next seamount, Pitilo, would occupy the vast majority of the day.</p>
<p>As during Bors’s first arrival to Koatus, Jun and Lira threaded their way through the other islands until they arrived to those most adjacent to the seamount itself. Pitilo was noticeably broader than Koatus, though of a similar height and with a more rounded peak. The surface appeared softer and more brown and green in contrast to Koatus’s rocky black and gray. The waters seemed even more full of coral reefs and schools of fish, something Jun had hardly thought possible. As they pulled up their raft to an island, they came close enough to the seamount for Jun to notice structures on its slopes.</p>
<p>They were soon approached by the leader of this island. They made their introductions, and in conversation, learned more about the seamount. Pitilo was the largest of the seamounts, and as a result, tended to have the most islands in its orbit. While research on the islands of Pitilo had historically been in a similar vein to that which happened on the islands of Koatus, recently, some farmers had discovered trees growing on the seamount much taller and straighter than anything they had grown on the islands. In addition, these large trees grew coconuts which, when opened, contained sweet water and flesh. While these farmers still depended on the islands for much of their food, they seemed to be prospering, and their numbers were growing.</p>
<p>Jun joined a historians’ meeting on an island of Pitilo and listened impatiently as they discussed updates on arriving and departing islands, similar to what the historians of Koatus had discussed. As the meeting concluded, Jun joined a conversation with several historians and gently probed for knowledge about the Erosion. Most seem confused, but a minority glared then pointedly turned away. One took his arm and pulled him aside. “Who is your mentor? They should have put that notion out of your head before you brought it up here.”</p>
<p>Jun pulled his arm free. “I come from Koatus and don’t have one of your mentors. What is wrong with my idea?”</p>
<p>The historian searched Jun’s expression for evidence of sincerity. “I thought Koatus had disallowed this nonsense, but perhaps things have changed there. If you’d like to stay on an island of Pitilo, think more carefully on your words. We don’t allow our historians to spread dangerous delusions.”</p>
<p>Jun angrily stalked away. He wandered from island to island, absentmindedly searching for Lira as he waited for evening when they planned to meet back at their original landing point. At some point, he realized he was searching in the wrong place. Jun rowed to the seamount itself and found Lira amongst the seamount farmers. As she saw him approach, she pulled away from her conversation to join him. “Jun, I can’t believe what they’re able to do here.”</p>
<p>Seeing her enthusiasm, Jun was happy to put his frustrations aside. “Really, why don’t you tell me?”</p>
<p>Lira led Jun excitedly through the farmers’ impromptu village, where scattered palm trees surrounded grassy shelters. Between them, farmers congregated and sipped from large green coconuts. Lira explained how their harvesting of the palm and other tree trunks on the seamount fueled the recent ubiquity of rafts across the entire Archipelago. Even just a couple years ago, travel between islands was much more limited.</p>
<p>More recently, the demand for the seamount’s trees slowed, and so the farmers began to explore what else this new land, as large as 20 islands, could provide them. As they climbed up the seamount, they found many natural freshwater ponds, each as large as those laboriously carved into the surface of the islands. Upon reaching the peak, they discovered a magnificent turquoise lake nestled in a massive depression. The farmers informed them that during heavy rainfall, the lake would overflow the bounds of its crater and send tributaries down to slopes to fill the many ponds and eventually join the ocean.</p>
<p>The farmers hadn’t planned to stay long on the seamount, but with every passing day of bountiful harvest, they grew more settled in. Supported by trade with the islands, they had a comfortable life. However, even Pitilo was only large enough to support a fraction of the people who lived on the islands which floated around it. Perhaps even fewer than its size would suggest, since this land which so easily put forth plant life was void of the parasitic organisms Jun had learned to survive off of.</p>
<p>Jun and Lira slept on the seamount, and come morning, departed. After the reception Jun received from Pitilo’s historians, he knew there was little more for him to learn here. Over the course of weeks. they journeyed between half a dozen more seamounts in the Archipelago. Jun would acquaint himself with the local historians while Lira would search for trades or techniques not found elsewhere. None of the seamounts seemed to permit open discussion of the Erosion, but the generality of knowledge of it varied strongly between them.</p>
<p>In one small seamount, island residents began to build out large rafts, fueled by harvesting in Pitilo, which they connected to their seamount to expand its area. This space was primarily used for trades such as fish leather tanning as few besides the tanners would willingly choose to live near the resulting stench. Jun asked about the inception of this idea and eventually traced it back to Erosion-accepting historians. While they were loath to admit it, Jun guessed they pushed for this in case the extra space would be needed to support people as the islands dwindled.</p>
<p>Lira hadn’t found as many novel practices as she had hoped; Koatus and Pitilo seemed to excel in that regard. Eventually, she started asking people of various islands about the things they had seen on their islands’ travels. Some tales she dismissed as fanciful, such as those of great serpents silently swimming round the island, never breaching the surface, or ghostly glowing swirls in the water which shone with every ripple, but only in the darkest of nights.</p>
<p>Other tales seemed more intriguing. One fisherman found husks which resembled Pitilo’s coconuts, but he claimed to have done so long before Pitilo began farming, and during a time when his island was far from the Archipelago. A gatherer spoke of what appeared to be a great seamount far away by the horizon. A mass of land as tall as Pitilo, but stretching wide in both directions, wide enough for the land to dwarf the Archipelago altogether. However, the gatherer’s island continued upon the path it chose, and he never saw that mass upon the water again.</p>
<p>Jun and Lira rowed gently through the calm ocean water, finally headed back towards Che’el. Weeks of hectic travel had left them quiet and reflective for the journey back. “Do you think people could live on that landmass?” Lira said quietly.</p>
<p>Jun looked to Lira, seeing the careful consideration in her expression. Over the course of their travels, she’d taken more to thinking about the Erosion than he’d expected. Maybe she wasn’t so stubborn after all. “Even the farmers on Pitilo rely on trade for gathered meat. They could hardly survive on only coconuts.”</p>
<p>“Sure, but that’s because coconuts are all they have on Pitilo. But just think about how much better coconuts are than any trees or plants we can grow on Koatus or our islands. The farmers believed Pitilo could grow them because it was large enough to accumulate fresh water and dirt. If that’s the case, imagine what sort of trees could grow on a landmass 10 or 20 times as big as Pitilo!” Lira’s eyes were bright with excitement. “Maybe they’d be enough for us to survive without needing to rely on the islands.”</p>
<p>“Even if you’re right, how would we even find that landmass again? It’s just a story from years ago.” Jun couldn’t imagine a life lived there. The night he had slept on Pitilo, he pressed his ear to the earth like he did each night, but for the first time he could remember, the only response was silence. Che’el had fed him, housed him, and carried him through the ocean to always fresh and fertile waters. On Pitilo, or even this mysterious landmass, Jun felt he’d have to wrench his sustenance from the dead rocks beneath his feet.</p>
<hr>
<p>Many days later, Jun and Lira arrived at Che’el, and they docked their raft. Lira gave Jun a sheepish smile, then went off to find her family. Their journey hadn’t answered as many questions as Jun had hoped, but he still wanted to find Karu to talk about the possibility of encouraging the settlement of Koatus, like what had been done at Pitilo. Maybe they could look through the records for more sightings of the landmass to get a better sense of its location.</p>
<p>Jun greeted Elys as he approached their family shelter. Alcar was still working intently on disassembling and preserving his day’s catch, but Elys, holding Jora, sat Jun down to talk about his journey. He started to describe the trees of Pitilo when he noticed Elys’s eyes wander towards something in the distance behind him. Jun turned around and saw what appeared to be an island approaching Che’el from a couple of miles away.</p>
<p>The island’s front flippers rose into the air and struck down into the water at a pace which appeared glacial at a distance, but was still faster than Jun had ever seen done by Che’el. More and more of Che’el’s inhabitants emerged to watch the new island joining Koatus.</p>
<p>Over several minutes, the new island continued to draw closer, showing no sign of slowing. Islands had certainly come closer to Che’el as they floated around the Archipelago, but none with this speed. “Is it going to hit us?” Jun asked Alcar.</p>
<p>“It’s never happened before, it won’t happen today,” Alcar said. However, his brows were knitted with worry. They watched the island approach, growing larger and larger in their vision. When the island was less than a mile away, Jun noticed angry red patches on the island’s skin near the base of its neck and flippers. They looked almost like the patches left behind by parasites, but far larger as to be visible from this distance.</p>
<p>Closer and closer the island crept, and Jun’s view grew ever clearer. Small dark spots appeared adjacent to the red patches, looking almost like biting flies buzzing at a wound. Several minutes later, Jun picked out arms and legs and realized the spots were people. Several more minutes passed by, and Jun started to see the motion of their arms striking down onto the island’s skin. Were they dislodging parasites? How had the damage grown so much?</p>
<p>The island was now less than half a mile away, and Jun couldn’t seem to figure out what the people upon it were doing. The island stared forward, expression inscrutable as it continued its advance. The people of Che’el, initially standing at the edge facing the oncoming island, now started to back away. “Gather your things,” Alcar shouted, “and head for the rafts!”</p>
<p>The crowd ran across the island, a select few stopping to gather tools or food. Jun continued to glance back as he ran. The island grew larger and larger in his vision, and suddenly he realized what its inhabitants had done. With each strike to the island’s skin, they tore off meat to consume. All people owed their survival to their islands, but on this island, people decided to remove the middle link of the food chain. On this island, humans had become the lampreys, the copepods, the amphipods, and they fed on the island far more ferociously than the creatures they replaced.</p>
<p>Jun looked into the approaching island’s eyes once more. Was that determination or pain that drove it forward? Then, over the course of a minute, the island plunged its flippers into the ocean far deeper than it had on the other strokes. It pulled the flippers back and up, and slowly but surely, the island began to dip beneath the surface. Jun grabbed his father’s arm, and his family stopped and watched in horror as the people of the island dashed about, most eventually clinging to the shell’s surface. The island sank, bit by bit, until every trace of it and the people upon it had disappeared beneath the waves.</p>
<p>Elys gestured to the crowd to get their attention. “We have to save them, follow me to this side of the island! We can take rafts out!”</p>
<p>Alcar took her hand between his. “I’ll go to help them, but you take Jun and Jora on a raft on the other side of the island and get as far away as you can.”</p>
<p>Elys pulled him back towards where the island had sunk. “You saw how many people were on that island, we’ll all be needed to rescue them. Don’t forget that I can swim as well as you can.”</p>
<p>Alcar looked back to the now calm waters. “It’s not your swimming I’m worried about. That island has to come up sometime or another.”</p>
<p>Jun watched Elys look pleadingly at Alcar. Across the crowd, similar conversations appeared to take place as people slowly split off either to help the rescue effort or to join the evacuation. Jun looked back to the sea. If the islands were naturally buoyant as Rusik had told him, then his dad was right, it would surface eventually. He continued to watch as the group finally split and Alcar gestured for him to join the rescue swimmers and paddlers. He turned to see Elys carry Jora away with the rest, then ran to catch up with Alcar.</p>
<p>They approached the edge and began to distribute rafts when someone shouted, pointing out at the water. Jun looked up and saw a subtle swell form on the ocean’s surface. Then, the island’s head broke the surface, its body accelerating upwards to follow it. The island rose higher out of the water than Jun would have imagined possible, streams of white agitated water rushing from every crevice back into the ocean. Right as the island hit the peak of its rise, it accelerated downwards, the whole motion reminding Jun of a bobbing piece of wood surfacing after being held underwater.</p>
<p>The island’s sudden rise and crash churned the ocean to a froth. As Jun watched, a swell rushed away from the surfaced island in all directions. As it approached Che’el, it grew. Jun’s feet felt cemented to the surface, though the men and women around him had begun to flee. The wave grew, now tall enough to cover the sky, and in the last moment before it hit, Alcar took Jun’s arm and held him close.</p>


  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2023 <a href="http://example.org/">Varun Mangalick</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
